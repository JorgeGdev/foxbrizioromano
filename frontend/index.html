<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Tigrizio - AI Video Generator Dashboard</title>

  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" />
  
  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet" />
  
  <!-- Custom CSS -->
  <style>
    :root {
      --accent-color: #FF6B35;
      --secondary-color: #1A1A1A;
      --dark-color: #000000;
      --white-color: #FFFFFF;
      --body-text-color: #666666;
      --light-color: #F8F9FA;
      --orange-gradient: linear-gradient(135deg, #FF6B35 0%, #F7931E 100%);
      --dark-gradient: linear-gradient(135deg, #1A1A1A 0%, #2D2D2D 100%);
    }

    body {
      font-family: 'Poppins', sans-serif;
      background: var(--dark-color);
      color: var(--white-color);
      overflow-x: hidden;
    }

    .navbar {
      background: rgba(26, 26, 26, 0.95);
      backdrop-filter: blur(10px);
      border-bottom: 1px solid rgba(255, 107, 53, 0.2);
    }

    .navbar-brand {
      font-weight: 800;
      font-size: 1.5rem;
      background: var(--orange-gradient);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .hero-section {
      min-height: 100vh;
      background: var(--dark-gradient);
      display: flex;
      align-items: center;
      position: relative;
      overflow: hidden;
    }

    .hero-section::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grain" width="100" height="100" patternUnits="userSpaceOnUse"><circle cx="50" cy="50" r="0.5" fill="%23FF6B35" opacity="0.1"/></pattern></defs><rect width="100%" height="100%" fill="url(%23grain)"/></svg>');
      opacity: 0.1;
    }

    .dashboard-card {
      background: rgba(26, 26, 26, 0.8);
      border: 1px solid rgba(255, 107, 53, 0.2);
      border-radius: 15px;
      backdrop-filter: blur(10px);
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }

    .dashboard-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 3px;
      background: var(--orange-gradient);
      opacity: 0;
      transition: opacity 0.3s ease;
    }

    .dashboard-card:hover {
      transform: translateY(-5px);
      border-color: var(--accent-color);
      box-shadow: 0 20px 40px rgba(255, 107, 53, 0.2);
    }

    .dashboard-card:hover::before {
      opacity: 1;
    }

    .btn-tigrizio {
      background: var(--orange-gradient);
      border: none;
      color: white;
      font-weight: 600;
      padding: 12px 30px;
      border-radius: 50px;
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }

    .btn-tigrizio:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 25px rgba(255, 107, 53, 0.4);
      color: white;
    }

    .btn-secondary-tigrizio {
      background: transparent;
      border: 2px solid var(--accent-color);
      color: var(--accent-color);
      font-weight: 600;
      padding: 10px 28px;
      border-radius: 50px;
      transition: all 0.3s ease;
    }

    .btn-secondary-tigrizio:hover {
      background: var(--accent-color);
      color: white;
      transform: translateY(-2px);
    }

    .logs-container {
      height: 400px;
      overflow-y: auto;
      background: rgba(0, 0, 0, 0.5);
      border-radius: 10px;
      padding: 20px;
      border: 1px solid rgba(255, 107, 53, 0.2);
    }

    .log-entry {
      padding: 8px 12px;
      margin-bottom: 8px;
      border-radius: 8px;
      border-left: 3px solid var(--accent-color);
      background: rgba(26, 26, 26, 0.6);
      font-family: 'Courier New', monospace;
      font-size: 0.9rem;
      opacity: 0;
      animation: fadeInLog 0.5s ease forwards;
    }

    .log-success { border-left-color: #28a745; }
    .log-error { border-left-color: #dc3545; }
    .log-warning { border-left-color: #ffc107; }
    .log-info { border-left-color: #17a2b8; }

    @keyframes fadeInLog {
      to { opacity: 1; }
    }

    .status-indicator {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      display: inline-block;
      margin-right: 8px;
    }

    .status-active { background: #28a745; animation: pulse 2s infinite; }
    .status-inactive { background: #6c757d; }
    .status-processing { background: var(--accent-color); animation: pulse 1s infinite; }

    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }

    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
      margin-bottom: 30px;
    }

    .stat-card {
      background: var(--dark-gradient);
      border: 1px solid rgba(255, 107, 53, 0.2);
      border-radius: 12px;
      padding: 20px;
      text-align: center;
      position: relative;
      overflow: hidden;
    }

    .stat-number {
      font-size: 2rem;
      font-weight: 800;
      background: var(--orange-gradient);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .stat-label {
      color: var(--body-text-color);
      font-size: 0.9rem;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    .presenter-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 15px;
      margin-bottom: 20px;
    }

    .presenter-card {
      background: rgba(26, 26, 26, 0.6);
      border: 2px solid transparent;
      border-radius: 10px;
      padding: 15px;
      text-align: center;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .presenter-card.selected {
      border-color: var(--accent-color);
      background: rgba(255, 107, 53, 0.1);
    }

    .presenter-card:hover {
      border-color: var(--accent-color);
      transform: scale(1.05);
    }

    .form-control {
      background: rgba(26, 26, 26, 0.8);
      border: 1px solid rgba(255, 107, 53, 0.3);
      color: var(--white-color);
      border-radius: 10px;
      padding: 12px 15px;
    }

    .form-control:focus {
      background: rgba(26, 26, 26, 0.9);
      border-color: var(--accent-color);
      box-shadow: 0 0 0 0.2rem rgba(255, 107, 53, 0.25);
      color: var(--white-color);
    }

    .form-control::placeholder {
      color: var(--body-text-color);
    }

    .approval-buttons {
      display: grid;
      grid-template-columns: 1fr 1fr;
      grid-template-rows: 1fr 1fr;
      gap: 10px;
      margin-top: 20px;
    }

    .approval-btn {
      padding: 15px;
      border: none;
      border-radius: 10px;
      font-weight: 600;
      transition: all 0.3s ease;
      cursor: pointer;
    }

    .btn-approve { background: #28a745; color: white; }
    .btn-reject { background: #dc3545; color: white; }
    .btn-regenerate { background: #ffc107; color: #000; }
    .btn-cancel { background: #6c757d; color: white; }

    .approval-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(0,0,0,0.3);
    }

    .section-title {
      font-size: 1.8rem;
      font-weight: 700;
      margin-bottom: 30px;
      background: var(--orange-gradient);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    @media (max-width: 768px) {
      .presenter-grid {
        grid-template-columns: repeat(2, 1fr);
      }
      
      .approval-buttons {
        grid-template-columns: 1fr;
        grid-template-rows: repeat(4, 1fr);
      }
    }

    .loading-spinner {
      display: inline-block;
      width: 20px;
      height: 20px;
      border: 3px solid rgba(255,255,255,.3);
      border-radius: 50%;
      border-top-color: var(--accent-color);
      animation: spin 1s ease-in-out infinite;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }
  </style>
</head>

<body>
  <!-- Navigation -->
  <nav class="navbar navbar-expand-lg navbar-dark fixed-top">
    <div class="container">
      <a class="navbar-brand" href="#">TIGRIZIO</a>
      <div class="d-flex align-items-center">
        <span class="status-indicator" id="connectionStatus"></span>
        <span id="connectionText">Connecting...</span>
      </div>
    </div>
  </nav>

  <!-- Hero Dashboard Section -->
  <section class="hero-section">
    <div class="container">
      <div class="row align-items-center">
        <div class="col-lg-12">
          
          <!-- Stats Grid -->
          <div class="stats-grid mb-5">
            <div class="stat-card">
              <div class="stat-number" id="totalTweets">0</div>
              <div class="stat-label">Total Tweets</div>
            </div>
            <div class="stat-card">
              <div class="stat-number" id="vipTweets">0</div>
              <div class="stat-label">VIP Tweets</div>
            </div>
            <div class="stat-card">
              <div class="stat-number" id="activeSessions">0</div>
              <div class="stat-label">Active Sessions</div>
            </div>
            <div class="stat-card">
              <div class="stat-number" id="videosGenerated">0</div>
              <div class="stat-label">Videos Generated</div>
            </div>
          </div>

          <div class="row g-4">
            
            <!-- Video Generator -->
            <div class="col-lg-6">
              <div class="dashboard-card p-4 h-100">
                <h3 class="section-title">Video Generator</h3>
                
                <!-- Presenter Selection -->
                <div class="mb-4">
                  <label class="form-label">Select Presenter</label>
                  <div class="presenter-grid">
                    <div class="presenter-card" data-presenter="1">
                      <div class="fw-bold">Tigrizio 1</div>
                    </div>
                    <div class="presenter-card" data-presenter="2">
                      <div class="fw-bold">Tigrizio 2</div>
                    </div>
                    <div class="presenter-card" data-presenter="3">
                      <div class="fw-bold">Tigrizio 3</div>
                    </div>
                    <div class="presenter-card" data-presenter="4">
                      <div class="fw-bold">Tigrizio 4</div>
                    </div>
                    <div class="presenter-card" data-presenter="5">
                      <div class="fw-bold">Tigrizio 5</div>
                    </div>
                    <div class="presenter-card" data-presenter="6">
                      <div class="fw-bold">Tigrizio 6</div>
                    </div>
                    <div class="presenter-card" data-presenter="7">
                      <div class="fw-bold">Tigrizio 7</div>
                    </div>
                    <div class="presenter-card" data-presenter="8">
                      <div class="fw-bold">Tigrizio 8</div>
                    </div>
                    <div class="presenter-card" data-presenter="9">
                      <div class="fw-bold">Tigrizio 9</div>
                    </div>
                  </div>
                </div>

                <!-- Keyword Input -->
                <div class="mb-4">
                  <label class="form-label">Keyword/Topic</label>
                  <input type="text" class="form-control" id="keywordInput" 
                         placeholder="e.g., Haaland, Real Madrid, transfer news">
                  <small class="text-muted">Enter player names, clubs, or football topics</small>
                </div>

                <!-- Generate Button -->
                <button class="btn btn-tigrizio w-100" id="generateBtn">
                  <span id="generateText">Generate Video</span>
                  <span id="generateSpinner" class="loading-spinner d-none ms-2"></span>
                </button>
              </div>
            </div>

            <!-- Scraping Control -->
            <div class="col-lg-6">
              <div class="dashboard-card p-4 h-100">
                <h3 class="section-title">Scraping Control</h3>
                
                <div class="mb-4">
                  <div class="d-flex justify-content-between align-items-center mb-3">
                    <span>Auto Scraping</span>
                    <div class="d-flex align-items-center">
                      <span class="status-indicator" id="scrapingStatus"></span>
                      <span id="scrapingStatusText">Inactive</span>
                    </div>
                  </div>
                  
                  <div class="d-grid gap-2">
                    <button class="btn btn-tigrizio" id="toggleScrapingBtn">
                      Enable Auto Scraping
                    </button>
                    <button class="btn btn-secondary-tigrizio" id="manualScrapingBtn">
                      Manual Scraping
                    </button>
                  </div>
                </div>

                <div class="mb-4">
                  <h5>Recent Actions</h5>
                  <div class="d-grid gap-2">
                    <button class="btn btn-secondary-tigrizio btn-sm" onclick="loadStats()">
                      Refresh Stats
                    </button>
                    <button class="btn btn-secondary-tigrizio btn-sm" onclick="loadVipTweets()">
                      View VIP Tweets
                    </button>
                    <button class="btn btn-secondary-tigrizio btn-sm" onclick="loadRecentTweets()">
                      View Recent Tweets
                    </button>
                  </div>
                </div>
              </div>
            </div>

            <!-- Script Approval (Hidden by default) -->
            <div class="col-12 d-none" id="scriptApprovalSection">
              <div class="dashboard-card p-4">
                <h3 class="section-title">Script Approval Required</h3>
                
                <div class="mb-3">
                  <strong>Presenter:</strong> <span id="approvalPresenter"></span> |
                  <strong>Keyword:</strong> <span id="approvalKeyword"></span> |
                  <strong>Words:</strong> <span id="approvalWordCount"></span>
                </div>
                
                <div class="mb-4 p-3" style="background: rgba(0,0,0,0.5); border-radius: 10px;">
                  <h5>Generated Script:</h5>
                  <p id="approvalScript" style="font-style: italic;"></p>
                </div>
                
                <div class="approval-buttons">
                  <button class="approval-btn btn-approve" onclick="approveScript()">
                    Approve - Generate Video
                  </button>
                  <button class="approval-btn btn-reject" onclick="rejectScript()">
                    Reject - Regenerate
                  </button>
                  <button class="approval-btn btn-regenerate" onclick="regenerateScript()">
                    Regenerate Script
                  </button>
                  <button class="approval-btn btn-cancel" onclick="cancelGeneration()">
                    Cancel Everything
                  </button>
                </div>
              </div>
            </div>

            <!-- Real-time Logs -->
            <div class="col-12">
              <div class="dashboard-card p-4">
                <h3 class="section-title">System Logs</h3>
                <div class="logs-container" id="logsContainer">
                  <div class="log-entry log-info">
                    <strong>[SYSTEM]</strong> Tigrizio Dashboard initialized
                  </div>
                  <div class="log-entry log-info">
                    <strong>[INFO]</strong> Waiting for user actions...
                  </div>
                </div>
              </div>
            </div>

          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- JavaScript -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="app.js"></script>
  <script>
    // Global variables
    let selectedPresenter = null;
    let currentSessionId = null;
    let isAutoScrapingActive = false;
    let wsConnection = null;

    // Initialize dashboard
    document.addEventListener('DOMContentLoaded', function() {
      initializeDashboard();
      setupEventListeners();
      loadStats();
      updateConnectionStatus('connecting');
    });

    function initializeDashboard() {
      addLog('SYSTEM', 'Dashboard initialized successfully', 'info');
      
      // Select first presenter by default
      selectPresenter(1);
      
      // Load initial data
      setTimeout(() => {
        updateConnectionStatus('connected');
        addLog('API', 'Connected to Tigrizio backend', 'success');
      }, 1000);
    }

    function setupEventListeners() {
      // Presenter selection
      document.querySelectorAll('.presenter-card').forEach(card => {
        card.addEventListener('click', function() {
          const presenter = this.dataset.presenter;
          selectPresenter(presenter);
        });
      });

      // Generate video button
      document.getElementById('generateBtn').addEventListener('click', generateVideo);

      // Scraping controls
      document.getElementById('toggleScrapingBtn').addEventListener('click', toggleAutoScraping);
      document.getElementById('manualScrapingBtn').addEventListener('click', performManualScraping);

      // Enter key on keyword input
      document.getElementById('keywordInput').addEventListener('keypress', function(e) {
        if (e.key === 'Enter') {
          generateVideo();
        }
      });
    }

    function selectPresenter(number) {
      // Remove previous selection
      document.querySelectorAll('.presenter-card').forEach(card => {
        card.classList.remove('selected');
      });
      
      // Add selection to clicked card
      document.querySelector(`[data-presenter="${number}"]`).classList.add('selected');
      selectedPresenter = number;
      
      addLog('USER', `Selected Tigrizio ${number} as presenter`, 'info');
    }

    function generateVideo() {
      const keyword = document.getElementById('keywordInput').value.trim();
      
      if (!selectedPresenter) {
        addLog('ERROR', 'Please select a presenter first', 'error');
        return;
      }
      
      if (!keyword) {
        addLog('ERROR', 'Please enter a keyword or topic', 'error');
        return;
      }
      
      if (keyword.length < 2) {
        addLog('ERROR', 'Keyword must be at least 2 characters', 'error');
        return;
      }

      // Start generation process
      setGenerating(true);
      currentSessionId = `VIDEO-${Date.now()}`;
      
      addLog('GENERATOR', `Starting video generation: Tigrizio${selectedPresenter}@${keyword}`, 'info');
      addLog('STEP-1', 'Searching for related tweets...', 'info');
      
      // Simulate the process (replace with actual API calls)
      setTimeout(() => {
        addLog('STEP-1', 'Found 3 relevant tweets', 'success');
        addLog('STEP-2', 'Generating script with OpenAI...', 'info');
        
        setTimeout(() => {
          showScriptApproval(selectedPresenter, keyword, "¡INCREÍBLE! Erling Haaland está muy cerca de firmar una extensión con Manchester City. HERE WE GO - Las negociaciones están en fase final y el anuncio podría llegar esta semana. ¿Será esta la noticia que todos esperábamos?", 79);
        }, 2000);
      }, 1500);
    }

    function showScriptApproval(presenter, keyword, script, wordCount) {
      setGenerating(false);
      
      // Update approval section
      document.getElementById('approvalPresenter').textContent = `Tigrizio ${presenter}`;
      document.getElementById('approvalKeyword').textContent = keyword;
      document.getElementById('approvalWordCount').textContent = wordCount;
      document.getElementById('approvalScript').textContent = script;
      
      // Show approval section
      document.getElementById('scriptApprovalSection').classList.remove('d-none');
      
      addLog('APPROVAL', 'Script generated - Waiting for your approval', 'warning');
      addLog('SCRIPT', `Generated ${wordCount} words script`, 'info');
    }

    function approveScript() {
      hideScriptApproval();
      addLog('APPROVAL', 'Script approved - Starting video generation', 'success');
      addLog('STEP-3', 'Creating audio with ElevenLabs...', 'info');
      
      setTimeout(() => {
        addLog('STEP-3', 'Audio generated: 156 KB, ~20s duration', 'success');
        addLog('STEP-4', 'Generating video with Hedra AI (8-10 minutes)...', 'info');
        
        setTimeout(() => {
          addLog('STEP-4', 'Video generation completed successfully!', 'success');
          addLog('COMPLETED', 'Video ready: tigrizio_video_12345.mp4 (2.1 MB)', 'success');
        }, 8000);
      }, 3000);
    }

    function rejectScript() {
      hideScriptApproval();
      addLog('APPROVAL', 'Script rejected - Regenerating automatically', 'warning');
      addLog('STEP-2', 'Regenerating script with OpenAI...', 'info');
      
      setTimeout(() => {
        showScriptApproval(selectedPresenter, document.getElementById('keywordInput').value, "¡BOMBAZO! Las últimas horas han sido decisivas para Erling Haaland y Manchester City. Fuentes cercanas confirman que el acuerdo está prácticamente cerrado. El noruego seguirá vistiendo la camiseta celeste. ¿Qué opinas de esta decisión?", 75);
      }, 2000);
    }

    function regenerateScript() {
      hideScriptApproval();
      addLog('APPROVAL', 'Regenerating script...', 'info');
      
      setTimeout(() => {
        showScriptApproval(selectedPresenter, document.getElementById('keywordInput').value, "¡HISTÓRICO! Erling Haaland renueva con Manchester City hasta 2029. El atacante noruego firma el contrato más lucrativo de la historia del club. Las cifras son astronómicas y confirman su compromiso a largo plazo. ¿Será suficiente para conquistar Europa?", 81);
      }, 2000);
    }

    function cancelGeneration() {
      hideScriptApproval();
      addLog('APPROVAL', 'Generation cancelled - No tokens spent', 'info');
      addLog('SYSTEM', 'Ready for new video generation', 'info');
    }

    function hideScriptApproval() {
      document.getElementById('scriptApprovalSection').classList.add('d-none');
    }

    function toggleAutoScraping() {
      isAutoScrapingActive = !isAutoScrapingActive;
      
      const btn = document.getElementById('toggleScrapingBtn');
      const status = document.getElementById('scrapingStatus');
      const statusText = document.getElementById('scrapingStatusText');
      
      if (isAutoScrapingActive) {
        btn.textContent = 'Disable Auto Scraping';
        btn.classList.remove('btn-tigrizio');
        btn.classList.add('btn-secondary-tigrizio');
        status.className = 'status-indicator status-active';
        statusText.textContent = 'Active (Every 3h)';
        addLog('SCRAPING', 'Auto scraping enabled - Every 3 hours during EU hours', 'success');
      } else {
        btn.textContent = 'Enable Auto Scraping';
        btn.classList.remove('btn-secondary-tigrizio');
        btn.classList.add('btn-tigrizio');
        status.className = 'status-indicator status-inactive';
        statusText.textContent = 'Inactive';
        addLog('SCRAPING', 'Auto scraping disabled', 'info');
      }
    }

    function performManualScraping() {
      addLog('SCRAPING', 'Starting manual scraping...', 'info');
      
      const btn = document.getElementById('manualScrapingBtn');
      btn.disabled = true;
      btn.innerHTML = '<span class="loading-spinner me-2"></span>Scraping...';
      
      setTimeout(() => {
        addLog('SCRAPING', 'Scraping completed: 7 new tweets, 3 VIP', 'success');
        addLog('DATABASE', 'Tweets saved to Supabase with embeddings', 'success');
        btn.disabled = false;
        btn.textContent = 'Manual Scraping';
        
        // Update stats
        updateStats();
      }, 3000);
    }

    function setGenerating(isGenerating) {
      const btn = document.getElementById('generateBtn');
      const text = document.getElementById('generateText');
      const spinner = document.getElementById('generateSpinner');
      
      btn.disabled = isGenerating;
      
      if (isGenerating) {
        text.textContent = 'Generating...';
        spinner.classList.remove('d-none');
      } else {
        text.textContent = 'Generate Video';
        spinner.classList.add('d-none');
      }
    }

    function addLog(category, message, type = 'info') {
      const container = document.getElementById('logsContainer');
      const timestamp = new Date().toLocaleTimeString();
      
      const logEntry = document.createElement('div');
      logEntry.className = `log-entry log-${type}`;
      logEntry.innerHTML = `<strong>[${category}]</strong> ${message} <small class="text-muted float-end">${timestamp}</small>`;
      
      container.appendChild(logEntry);
      container.scrollTop = container.scrollHeight;
      
      // Remove old logs (keep last 50)
      const logs = container.children;
      if (logs.length > 50) {
        container.removeChild(logs[0]);
      }
    }

    function updateConnectionStatus(status) {
      const indicator = document.getElementById('connectionStatus');
      const text = document.getElementById('connectionText');
      
      switch(status) {
        case 'connected':
          indicator.className = 'status-indicator status-active';
          text.textContent = 'Connected';
          break;
        case 'connecting':
          indicator.className = 'status-indicator status-processing';
          text.textContent = 'Connecting...';
          break;
        case 'disconnected':
          indicator.className = 'status-indicator status-inactive';
          text.textContent = 'Disconnected';
          break;
      }
    }

    function loadStats() {
      addLog('API', 'Loading system statistics...', 'info');
      
      // Simulate API call (replace with actual fetch to your backend)
      setTimeout(() => {
        // Update stats with animation
        animateNumber('totalTweets', 43);
        animateNumber('vipTweets', 18);
        animateNumber('activeSessions', 2);
        animateNumber('videosGenerated', 127);
        
        addLog('STATS', 'Statistics updated successfully', 'success');
      }, 500);
    }

    function animateNumber(elementId, targetNumber) {
      const element = document.getElementById(elementId);
      const startNumber = parseInt(element.textContent) || 0;
      const increment = Math.ceil((targetNumber - startNumber) / 20);
      let currentNumber = startNumber;
      
      const timer = setInterval(() => {
        currentNumber += increment;
        if (currentNumber >= targetNumber) {
          currentNumber = targetNumber;
          clearInterval(timer);
        }
        element.textContent = currentNumber;
      }, 50);
    }

    function updateStats() {
      // Increment stats after successful operations
      const totalTweets = parseInt(document.getElementById('totalTweets').textContent);
      const vipTweets = parseInt(document.getElementById('vipTweets').textContent);
      
      animateNumber('totalTweets', totalTweets + 7);
      animateNumber('vipTweets', vipTweets + 3);
    }

    function loadVipTweets() {
      addLog('API', 'Loading VIP tweets...', 'info');
      
      setTimeout(() => {
        addLog('VIP-1', '[HERE WE GO] Haaland extension with Man City confirmed', 'success');
        addLog('VIP-2', '[OFFICIAL] Mbappe joins Real Madrid - Deal completed', 'success');
        addLog('VIP-3', '[EXCLUSIVE] Barcelona close to signing Joao Felix', 'success');
        addLog('API', 'VIP tweets loaded successfully', 'success');
      }, 1000);
    }

    function loadRecentTweets() {
      addLog('API', 'Loading recent tweets...', 'info');
      
      setTimeout(() => {
        addLog('RECENT-1', 'Arsenal monitoring Osimhen situation closely', 'info');
        addLog('RECENT-2', 'Liverpool interested in Benfica midfielder', 'info');
        addLog('RECENT-3', 'Chelsea preparing bid for Brighton defender', 'info');
        addLog('RECENT-4', 'Man United scouting Bundesliga talents', 'info');
        addLog('API', 'Recent tweets loaded successfully', 'success');
      }, 1000);
    }

    // Simulated real-time updates
    function simulateRealTimeUpdates() {
      setInterval(() => {
        if (Math.random() > 0.7) { // 30% chance every 30 seconds
          const updates = [
            { category: 'TWITTER', message: 'New tweet detected from Fabrizio Romano', type: 'info' },
            { category: 'VIP', message: 'HERE WE GO tweet detected - Transfer confirmed', type: 'success' },
            { category: 'SYSTEM', message: 'Database updated with new embeddings', type: 'success' },
            { category: 'API', message: 'Health check completed - All systems operational', type: 'success' }
          ];
          
          const randomUpdate = updates[Math.floor(Math.random() * updates.length)];
          addLog(randomUpdate.category, randomUpdate.message, randomUpdate.type);
        }
      }, 30000); // Every 30 seconds
    }

    // API Communication Functions (replace these with actual API calls)
    async function callAPI(endpoint, method = 'GET', data = null) {
      try {
        addLog('API', `Calling ${endpoint}...`, 'info');
        
        const options = {
          method: method,
          headers: {
            'Content-Type': 'application/json',
          }
        };
        
        if (data) {
          options.body = JSON.stringify(data);
        }
        
        // Replace with your actual backend URL
        const response = await fetch(`http://localhost:3000/api${endpoint}`, options);
        const result = await response.json();
        
        if (response.ok) {
          addLog('API', `${endpoint} completed successfully`, 'success');
          return result;
        } else {
          addLog('API', `${endpoint} failed: ${result.error}`, 'error');
          return null;
        }
      } catch (error) {
        addLog('API', `${endpoint} error: ${error.message}`, 'error');
        return null;
      }
    }

    // Real API integration functions (uncomment and modify when ready)
    /*
    async function generateVideoAPI() {
      const data = {
        presenter: selectedPresenter,
        keyword: document.getElementById('keywordInput').value
      };
      
      return await callAPI('/generate-video', 'POST', data);
    }

    async function toggleScrapingAPI() {
      return await callAPI('/toggle-scraping', 'POST', { enable: !isAutoScrapingActive });
    }

    async function getStatsAPI() {
      return await callAPI('/stats');
    }

    async function approveScriptAPI() {
      return await callAPI(`/approve/${currentSessionId}`, 'POST');
    }
    */

    // Keyboard shortcuts
    document.addEventListener('keydown', function(e) {
      // Ctrl + Enter to generate video
      if (e.ctrlKey && e.key === 'Enter') {
        e.preventDefault();
        generateVideo();
      }
      
      // Escape to cancel/hide approval
      if (e.key === 'Escape') {
        const approvalSection = document.getElementById('scriptApprovalSection');
        if (!approvalSection.classList.contains('d-none')) {
          cancelGeneration();
        }
      }
    });

    // Start simulated real-time updates
    setTimeout(simulateRealTimeUpdates, 5000);

    // Auto-refresh stats every 2 minutes
    setInterval(loadStats, 120000);
  </script>
</body>
</html>